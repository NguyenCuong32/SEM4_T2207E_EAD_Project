<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
	<!--begin::Head-->
	<head>
		<title>Metronic - the world's #1 selling Bootstrap Admin Theme Ecosystem for HTML, Vue, React, Angular &amp; Laravel by Keenthemes</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="Metronic - Bootstrap 5 HTML, VueJS, React, Angular &amp; Laravel Admin Dashboard Theme" />
		<meta property="og:url" content="https://keenthemes.com/metronic" />
		<meta property="og:site_name" content="Keenthemes | Metronic" />
		<link rel="canonical" href="https://preview.keenthemes.com/metronic8" />
		<link rel="shortcut icon" th:href="@{/media/logos/favicon.ico}" />
		<!--begin::Fonts-->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
		<!--end::Fonts-->
		<!--begin::Page Vendor Stylesheets(used by this page)-->
		<link th:href="@{/plugins/custom/datatables/datatables.bundle.css}" rel="stylesheet" type="text/css" />
		<!--end::Page Vendor Stylesheets-->
		<!--begin::Global Stylesheets Bundle(used by all pages)-->
		<link th:href="@{/plugins/global/plugins.bundle.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{/css/style.bundle.css}" rel="stylesheet" type="text/css" />
		<!--end::Global Stylesheets Bundle-->

		<meta th:name="_csrf" th:content="${_csrf.token}"/>
		<meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>
	</head>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" class="header-fixed header-tablet-and-mobile-fixed toolbar-enabled toolbar-fixed aside-enabled aside-fixed" style="--kt-toolbar-height:55px;--kt-toolbar-height-tablet-and-mobile:55px">
		<!--begin::Main-->
		<!--begin::Root-->
		<div class="d-flex flex-column flex-root">
			<!--begin::Page-->
			<div class="page d-flex flex-row flex-column-fluid">
				<!--begin::Aside-->
				<div th:replace="fragments/aside :: aside"></div>
				<!--end::Aside-->
				<!--begin::Wrapper-->
				<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
					<!--begin::Header-->
					<div th:replace="fragments/header :: header(title = 'Commission Policy')"></div>
					<!--end::Header-->
					<!--begin::Content-->
					<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
						<!--begin::Toolbar-->

						<!--end::Toolbar-->
						<!--begin::Post-->
						<div class="post d-flex flex-column-fluid" id="kt_post">
							<!--begin::Container-->
							<div id="kt_content_container" class="container-xxl">
								<!--begin::Products-->
								<div class="card card-flush">
									<!--begin::Card header-->
									<div class="card-header align-items-center py-5 gap-2 gap-md-5">
										<h3 class="card-title align-items-start flex-column">
											<span class="card-label fw-bolder fs-3 mb-1">Recent Policies</span>
											<span class="text-muted mt-1 fw-bold fs-7">Total 07 policies</span>
										</h3>
										<!--begin::Card toolbar-->
										<div class="card-toolbar flex-row-fluid justify-content-end gap-5">
											<!--begin::Add product-->
											<a href="/" class="btn btn-primary">Add Policy</a>
											<!--end::Add product-->
										</div>
										<!--end::Card toolbar-->
									</div>
									<!--end::Card header-->
									<!--begin::Card body-->
									<div class="card-body pt-0">
										<!--begin::Table-->
										<table class="table align-middle table-row-dashed fs-6 gy-5" id="kt_ecommerce_products_table">
											<!--begin::Table head-->
											<thead>
											<!--begin::Table row-->
											<tr class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
												<th class="w-10px pe-2">
													<div class="form-check form-check-sm form-check-custom form-check-solid me-3">
														<input class="form-check-input" type="checkbox" data-kt-check="true" data-kt-check-target="#kt_ecommerce_products_table .form-check-input" value="1" />
													</div>
												</th>
												<th class="min-w-100px">Policy</th>
												<th class="text-end min-w-100px">Start Date</th>
												<th class="text-end min-w-70px">End Date</th>
												<th class="text-end min-w-100px">Services</th>
												<th class="text-end min-w-100px">Commission Rate</th>
												<th class="text-end min-w-100px">Status</th>
												<th class="text-end min-w-70px">Actions</th>
											</tr>
											<!--end::Table row-->
											</thead>
											<!--end::Table head-->
											<!--begin::Table body-->
											<tbody class="fw-bold text-gray-600">
											<!--begin::Table row-->
											<tr th:each="policy : ${policies}">
												<!--begin::Checkbox-->
												<td>
													<div class="form-check form-check-sm form-check-custom form-check-solid">
														<input class="form-check-input" type="checkbox" value="1" />
													</div>
												</td>
												<!--end::Checkbox-->
												<!--begin::Category=-->
												<td>
													<div class="d-flex align-items-center">
														<div class="">
															<!--begin::Title-->
															<a class="text-gray-800 text-hover-primary fs-5 fw-bolder" data-kt-ecommerce-product-filter="product_name" th:text="${policy.code}"></a>
															<!--end::Title-->
														</div>
													</div>
												</td>
												<!--end::Category=-->
												<!--begin::SKU=-->
												<td class="text-end pe-0">
													<span class="fw-bolder" th:text="${#temporals.format(policy.startDate, 'dd/MM/yy')}"></span>
												</td>
												<!--end::SKU=-->
												<!--begin::Qty=-->
												<td class="text-end pe-0">
													<span class="fw-bolder ms-3" th:text="${#temporals.format(policy.endDate, 'dd/MM/yy')}"></span>
												</td>
												<!--end::Qty=-->
												<!--begin::Price=-->
												<td class="text-end pe-0">
													<span class="fw-bolder" th:text="${policy.policyAssignments.size()} + ' service(s)'"></span>
												</td>
												<!--end::Price=-->
												<!--begin::Rating-->
												<td class="text-end pe-0">
													<span class="fw-bolder">
														<span class="text-info" th:text="${policy.totalRate} + '%'">12%</span>
														(for <span th:text="${policy.commissionTiers.size()}">5</span> levels)
													</span>
												</td>
												<!--end::Rating-->
												<!--begin::Status=-->
												<td class="text-end pe-0" data-order="Published">
													<!--begin::Badges-->
													<div class="badge badge-light-success" th:if="${policy.status eq policy.status.ACTIVE}" th:text="${policy.status}"></div>
													<div class="badge badge-light-danger" th:if="${policy.status eq policy.status.EXPIRED}" th:text="${policy.status}"></div>
													<div class="badge badge-light-warning" th:if="${policy.status eq policy.status.PENDING}" th:text="${policy.status}"></div>
													<!--end::Badges-->
												</td>
												<!--end::Status=-->
												<!--begin::Action=-->
												<td class="text-end">
													<a href="#" class="btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 me-2">View</a>
													<a href="#" class="btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4">Edit</a>
												</td>
												<!--end::Action=-->
											</tr>
											<!--end::Table row-->


											</tbody>
											<!--end::Table body-->
										</table>
										<!--end::Table-->
										<div class="row">
											<div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start">
												<div class="dataTables_length">
													<label>
														<select class="form-select form-select-sm form-select-solid" id="size-select" th:attr="data-url=@{/policy(page=0)}">
															<option th:selected="${size == 5}" th:value="5">5</option>
															<option th:selected="${size == 10}" th:value="10">10</option>
															<option th:selected="${size == 25}" th:value="25">25</option>
															<option th:selected="${size == 50}" th:value="50">50</option>
														</select>
													</label>
												</div>
											</div>
											<div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end">
												<div class="dataTables_paginate paging_simple_numbers">
													<ul class="pagination">
														<li class="paginate_button page-item previous disabled" th:if="${currentPage} > 0">
															<a th:href="@{/policy(page=${currentPage - 1}, size=${size})}" class="page-link">
																<i class="previous"></i>
															</a>
														</li>
														<li class="paginate_button page-item" th:classappend="${currentPage == i} ? 'active' : ''" th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
															<a class="page-link" th:href="@{/policy(page=${i}, size=${size})}"
															   th:text="${i + 1}">1</a>
														</li>
														<li class="paginate_button page-item next" th:if="${currentPage} < ${totalPages} - 1">
															<a class="page-link" th:href="@{/policy(page=${currentPage + 1}, size=${size})}"><i class="next"></i></a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
									<!--end::Card body-->
								</div>
								<!--end::Products-->
							</div>
							<!--end::Container-->
						</div>
						<!--end::Post-->
					</div>
					<!--end::Content-->
				</div>
				<!--end::Wrapper-->
			</div>
			<!--end::Page-->
		</div>
		<!--end::Root-->

		<!--end::Main-->

		<!--begin::Scrolltop-->
		<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
			<!--begin::Svg Icon | path: icons/duotune/arrows/arr066.svg-->
			<span class="svg-icon">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
					<rect opacity="0.5" x="13" y="6" width="13" height="2" rx="1" transform="rotate(90 13 6)" fill="currentColor" />
					<path d="M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z" fill="currentColor" />
				</svg>
			</span>
			<!--end::Svg Icon-->
		</div>
		<!--end::Scrolltop-->
		<!--begin::Modals-->





		<!--end::Modals-->
		<!--begin::Javascript-->
		<script>var hostUrl = "/";</script>
		<!--begin::Global Javascript Bundle(used by all pages)-->
		<script th:src="@{/plugins/global/plugins.bundle.js}"></script>
		<script th:src="@{/js/scripts.bundle.js}"></script>
		<!--end::Global Javascript Bundle-->
		<!--begin::Page Vendors Javascript(used by this page)-->
		<script th:src="@{/plugins/custom/datatables/datatables.bundle.js}"></script>
		<!--end::Page Vendors Javascript-->
		<!--begin::Page Custom Javascript(used by this page)-->
		<script th:src="@{/js/widgets.bundle.js}"></script>
		<script th:src="@{/js/custom/widgets.js}"></script>
		<script th:src="@{/js/custom/apps/chat/chat.js}"></script>
		<script th:src="@{/js/custom/utilities/modals/upgrade-plan.js}"></script>
		<script th:src="@{/js/custom/utilities/modals/create-app.js}"></script>
		<script th:src="@{/js/custom/utilities/modals/users-search.js}"></script>

		<script>
			$(document).ready(function() {
				$('#size-select').on('change', function() {
					const newSize = $(this).val();
					const url = $(this).data('url') + `&size=${newSize}`;
					window.location.href = url;
				});
			});
		</script>
		<!--end::Page Custom Javascript-->
		<!--end::Javascript-->
	</body>
	<!--end::Body-->
</html>