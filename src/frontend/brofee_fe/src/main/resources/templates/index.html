<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
	<!--begin::Head-->
	<head>
		<title>Metronic - the world's #1 selling Bootstrap Admin Theme Ecosystem for HTML, Vue, React, Angular &amp; Laravel by Keenthemes</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="Metronic - Bootstrap 5 HTML, VueJS, React, Angular &amp; Laravel Admin Dashboard Theme" />
		<meta property="og:url" content="https://keenthemes.com/metronic" />
		<meta property="og:site_name" content="Keenthemes | Metronic" />
		<link rel="canonical" href="https://preview.keenthemes.com/metronic8" />
		<link rel="shortcut icon" th:href="@{/media/logos/favicon.ico}" />
		<!--begin::Fonts-->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
		<!--end::Fonts-->
		<!--begin::Page Vendor Stylesheets(used by this page)-->
		<link th:href="@{/plugins/custom/fullcalendar/fullcalendar.bundle.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{/plugins/custom/datatables/datatables.bundle.css}" rel="stylesheet" type="text/css" />
		<!--end::Page Vendor Stylesheets-->
		<!--begin::Global Stylesheets Bundle(used by all pages)-->
		<link th:href="@{/plugins/global/plugins.bundle.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{/css/style.bundle.css}" rel="stylesheet" type="text/css" />
		<!--end::Global Stylesheets Bundle-->

		<meta th:name="_csrf" th:content="${_csrf.token}"/>
		<meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>
	</head>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" class="header-fixed header-tablet-and-mobile-fixed toolbar-enabled toolbar-fixed aside-enabled aside-fixed" style="--kt-toolbar-height:55px;--kt-toolbar-height-tablet-and-mobile:55px">
		<!--begin::Main-->
		<!--begin::Root-->
		<div class="d-flex flex-column flex-root">
			<!--begin::Page-->
			<div class="page d-flex flex-row flex-column-fluid">
				<!--begin::Aside-->
				<div th:replace="fragments/aside :: aside"></div>
				<!--end::Aside-->
				<!--begin::Wrapper-->
				<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
					<!--begin::Header-->
					<div th:replace="fragments/header :: header(title = 'Home')"></div>
					<!--end::Header-->
					<!--begin::Content-->
					<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
						<!--begin::Toolbar-->

						<!--end::Toolbar-->
						<!--begin::Post-->
						<div class="post d-flex flex-column-fluid" id="kt_post">
							<!--begin::Container-->
							<div id="kt_content_container" class="container-xxl">
								<div class="row gy-5 g-xl-10">
									<div class="col-xl-5 mb-xl-10">
										<!--begin::Card-->
										<div class="card">
											<!--begin::Card body-->
											<div class="card-body">
												<!--begin::Heading-->
												<div class="card-px text-center pt-15 pb-15">
													<!--begin::Title-->
													<h2 class="fs-2x fw-bolder mb-0">Create New Transaction</h2>
													<!--end::Title-->
													<!--begin::Description-->
													<p class="text-gray-400 fs-4 fw-bold py-7">Please click on below buttons to create
														<br />transaction for spa's customer.</p>
													<!--end::Description-->
													<!--begin::Action-->
													<div class="d-flex justify-content-center align-items-center">
														<a href="#" class="btn btn-success er fs-6 px-8 py-4" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app">New Customer</a>
														<span class="mx-2 text-gray-400 fs-4 fw-bold">or</span>
														<a href="#" class="btn btn-primary er fs-6 px-8 py-4" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app_2">Existing Customer</a>
													</div>

													<!--end::Action-->
												</div>
												<!--end::Heading-->
												<!--begin::Illustration-->
												<div class="text-center pb-15 px-5">
													<img th:src="@{/media/illustrations/sketchy-1/2.png}" alt="" class="mw-100 h-200px h-sm-325px" />
												</div>
												<!--end::Illustration-->
											</div>
											<!--end::Card body-->
										</div>
										<!--end::Card-->
									</div>
									<div class="col-xl-7 mb-5 mb-xl-10">
										<div class="card card-flush h-xl-100">
											<!--begin::Card header-->
											<div class="card-header pt-7">
												<!--begin::Title-->
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label fw-bolder text-gray-800">Transaction Today</span>
													<span class="text-gray-400 mt-1 fw-bold fs-6">Total 0 transactions</span>
												</h3>
												<!--end::Title-->

											</div>
											<!--end::Card header-->
											<!--begin::Card body-->
											<div class="card-body pt-2">
												<!--begin::Table-->
												<div id="kt_table_widget_4_table_wrapper"
													 class="dataTables_wrapper dt-bootstrap4 no-footer">
													<div class="table-responsive">
														<table class="table align-middle table-row-dashed fs-6 gy-3 dataTable no-footer"
															   id="kt_table_widget_4_table">
															<!--begin::Table head-->
															<thead>
															<!--begin::Table row-->
															<tr class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
																<th class="sorting_disabled" rowspan="1"
																	colspan="1"
																	>Transaction
																</th>
																<th class="text-end min-w-100px sorting_disabled"
																	rowspan="1"
																	colspan="1" >Created
																</th>
																<th class="text-end min-w-125px sorting_disabled"
																	rowspan="1"
																	colspan="1" >Customer
																</th>
																<th class="text-end min-w-100px sorting_disabled"
																	rowspan="1"
																	colspan="1" >Services
																</th>
																<th class="text-end min-w-100px sorting_disabled"
																	rowspan="1"
																	colspan="1" >Total
																</th>
																<th class="text-end sorting_disabled" rowspan="1"
																	colspan="1"
																	></th>
															</tr>
															<!--end::Table row-->
															</thead>
															<!--end::Table head-->
															<!--begin::Table body-->
															<tbody class="fw-bolder text-gray-600">
															<tr th:each="transactionRow : ${transactions}">
																<td>
																	<a class="text-gray-800 text-hover-primary" th:text="${'#' + transactionRow.id}"></a>
																</td>
																<td class="text-end" th:text="${#temporals.format(transactionRow.transactionDate, 'HH:mm')}"></td>
																<td class="text-end">
																	<a class="text-gray-600 text-hover-primary" th:text="${transactionRow.customer.name}"></a>
																</td>
																<td class="text-end" th:text="${transactionRow.transactionServices.size() + ' service(s)'}"></td>
																<td class="text-end">
																	<span class="text-gray-800 fw-boldest" th:text="${#numbers.formatCurrency(transactionRow.total)}"></span>
																</td>
																<td class="text-end">
																	<button type="button"
																			class="btn btn-sm btn-icon btn-light btn-active-light-primary toggle h-25px w-25px"
																			data-kt-table-widget-4="expand_row">
																		<!--begin::Svg Icon | path: assets/media/icons/duotune/general/gen021.svg-->
																		<span class="svg-icon svg-icon-3 m-0 toggle-off"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
																			<rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor"/>
																			<path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor"/>
																			</svg>
																		</span>
																		<!--end::Svg Icon-->
																	</button>
																</td>
															</tr>
															</tbody>
															<!--end::Table body-->
														</table>
													</div>
													<div class="row">
														<div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"></div>
														<div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end"></div>
													</div>
												</div>
												<!--end::Table-->
											</div>
											<!--end::Card body-->
										</div>
									</div>
								</div>
							</div>
							<!--end::Container-->
						</div>

						<!--end::Post-->
					</div>
					<!--end::Content-->
				</div>
				<!--end::Wrapper-->
			</div>
			<!--end::Page-->
		</div>
		<!--end::Root-->

		<!--end::Main-->

		<!--begin::Scrolltop-->
		<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
			<!--begin::Svg Icon | path: icons/duotune/arrows/arr066.svg-->
			<span class="svg-icon">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
					<rect opacity="0.5" x="13" y="6" width="13" height="2" rx="1" transform="rotate(90 13 6)" fill="currentColor" />
					<path d="M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z" fill="currentColor" />
				</svg>
			</span>
			<!--end::Svg Icon-->
		</div>
		<!--end::Scrolltop-->
		<!--begin::Modals-->

		<!--begin::Modal - Create App-->
		<div class="modal fade" id="kt_modal_create_app" tabindex="-1" aria-hidden="true">
			<!--begin::Modal dialog-->
			<div class="modal-dialog modal-dialog-centered modal-fullscreen px-9 py-20">
				<!--begin::Modal content-->
				<div class="modal-content modal-rounded">
					<!--begin::Modal header-->
					<div class="modal-header">
						<!--begin::Modal title-->
						<h2>Create App</h2>
						<!--end::Modal title-->
						<!--begin::Close-->
						<div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
							<!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
							<span class="svg-icon svg-icon-1">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
									<rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
									<rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
								</svg>
							</span>
							<!--end::Svg Icon-->
						</div>
						<!--end::Close-->
					</div>
					<!--end::Modal header-->
					<!--begin::Modal body-->
					<div class="modal-body py-lg-10 px-lg-10">
						<!--begin::Stepper-->
						<div class="stepper stepper-pills stepper-column d-flex flex-column flex-xl-row flex-row-fluid" id="kt_modal_create_app_stepper">
							<!--begin::Aside-->
							<div class="d-flex justify-content-center justify-content-xl-start flex-row-auto w-100 w-xl-300px">
								<!--begin::Nav-->
								<div class="stepper-nav ps-lg-10">
									<!--begin::Step 1-->
									<div class="stepper-item current" data-kt-stepper-element="nav">
										<!--begin::Line-->
										<div class="stepper-line w-40px"></div>
										<!--end::Line-->
										<!--begin::Icon-->
										<div class="stepper-icon w-40px h-40px">
											<i class="stepper-check fas fa-check"></i>
											<span class="stepper-number">1</span>
										</div>
										<!--end::Icon-->
										<!--begin::Label-->
										<div class="stepper-label">
											<h3 class="stepper-title">Customer</h3>
											<div class="stepper-desc">Ask customer's info</div>
										</div>
										<!--end::Label-->
									</div>
									<!--end::Step 1-->
									<!--begin::Step 2-->
									<div class="stepper-item" data-kt-stepper-element="nav">
										<!--begin::Line-->
										<div class="stepper-line w-40px"></div>
										<!--end::Line-->
										<!--begin::Icon-->
										<div class="stepper-icon w-40px h-40px">
											<i class="stepper-check fas fa-check"></i>
											<span class="stepper-number">2</span>
										</div>
										<!--begin::Icon-->
										<!--begin::Label-->
										<div class="stepper-label">
											<h3 class="stepper-title">Service</h3>
											<div class="stepper-desc">Select services used</div>
										</div>
										<!--begin::Label-->
									</div>
									<!--end::Step 2-->
									<!--begin::Step 3-->
									<div class="stepper-item" data-kt-stepper-element="nav">
										<!--begin::Line-->
										<div class="stepper-line w-40px"></div>
										<!--end::Line-->
										<!--begin::Icon-->
										<div class="stepper-icon w-40px h-40px">
											<i class="stepper-check fas fa-check"></i>
											<span class="stepper-number">3</span>
										</div>
										<!--end::Icon-->
										<!--begin::Label-->
										<div class="stepper-label">
											<h3 class="stepper-title">Summary</h3>
											<div class="stepper-desc">Billing summary</div>
										</div>
										<!--end::Label-->
									</div>
									<!--end::Step 3-->
								</div>
								<!--end::Nav-->
							</div>
							<!--begin::Aside-->
							<!--begin::Content-->
							<div class="flex-row-fluid py-lg-5 px-lg-15">
								<!--begin::Form-->
								<form class="form" novalidate="novalidate" id="kt_modal_create_app_form" action="/transaction/new-customer" th:object="${transactionForNewCustomer}" method="post">
									<!--begin::Step 1-->
									<div class="current" data-kt-stepper-element="content">
										<div class="w-100">
											<input type="hidden" name="_csrf" th:value="${#ctx._csrf.token}" />
											<!--begin::Input group-->
											<div class="fv-row mb-10">
												<!--begin::Label-->
												<label class="d-flex align-items-center fs-5 fw-bold mb-2">
													<span class="required">Customer Name</span>
												</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" class="form-control form-control-lg form-control-solid" name="name" placeholder="" value="" onchange="updateSummary()" th:field="*{name}"/>
												<!--end::Input-->
											</div>
											<!--end::Input group-->
											<div class="row ">
												<!--begin::Col-->
												<div class="col-md-6 fv-row mb-10">
													<!--begin::Label-->
													<label class="d-flex align-items-center fs-5 fw-bold mb-2">
														<span class="required">Phone Number</span>
													</label>
													<!--end::Label-->
													<!--begin::Input-->
													<input type="text" class="form-control form-control-lg form-control-solid" name="phone" placeholder="" value="" onchange="updateSummary()" th:field="*{phone}"/>
													<!--end::Input-->
												</div>
												<!--end::Col-->
												<!--begin::Col-->
												<div class="col-md-6 fv-row mb-10">
													<!--begin::Label-->
													<label class="d-flex align-items-center fs-5 fw-bold mb-2">
														<span class="">Email</span>
													</label>
													<!--end::Label-->
													<!--begin::Input-->
													<input type="text" class="form-control form-control-lg form-control-solid" name="email" placeholder="" value="" onchange="updateSummary()" th:field="*{email}"/>
													<!--end::Input-->
												</div>
												<!--end::Col-->
											</div>
											<!--begin::Input group-->
											<div class="fv-row mb-10">
												<!--begin::Label-->
												<label class="d-flex align-items-center fs-5 fw-bold mb-2">
													<span class="">Address</span>
												</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" class="form-control form-control-lg form-control-solid" name="address" placeholder="" value="" onchange="updateSummary()" th:field="*{address}"/>
												<!--end::Input-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="fv-row mb-10">
												<!--begin::Label-->
												<label class="d-flex align-items-center fs-5 fw-bold mb-2">
													<span class="">Referrer Code / Phone Number</span>
												</label>
												<!--end::Label-->
												<!--begin::Input-->

												<div class="input-group">
													<input type="text" class="form-control form-control-lg form-control-solid" aria-describedby="basic-addon2" id="user-code-or-phone" name="codeOrPhone" th:field="*{codeOrPhone}"/>
													<button type="button" class="input-group-text btn-primary text-white" id="basic-addon2" onclick="searchUser()">Search</button>
												</div>
												<!--end::Input-->
												<div id="search-result"></div>
											</div>
										</div>
									</div>
									<!--end::Step 1-->
									<!--begin::Step 2-->
									<div data-kt-stepper-element="content">
										<div class="w-100 fv-row" >
											<!--begin::Input group-->
											<div th:each="category : ${categories}">
												<label class="d-flex align-items-center fs-5 fw-bold mb-4">
													<span th:text="${category.name}"></span>
												</label>
												<div class="row">
													<div class="w-lg-50" th:each="service : ${category.services}">
														<!--begin::Radio button-->
														<label class="btn btn-outline btn-outline-dashed d-flex flex-stack text-start p-6 mb-5">
															<!--end::Description-->
															<div class="d-flex align-items-center me-2">
																<!--begin::Radio-->
																<div class="form-check form-check-custom form-check-solid form-check-primary me-6">
																	<input class="form-check-input" type="checkbox" name="services" th:value="${service.id}" th:attr="data-name=${service.name},data-desc=${service.description}, data-price=${service.basePrice}" onchange="updateSummary()" th:field="*{services}"/>
																</div>
																<!--end::Radio-->

																<!--begin::Info-->
																<div class="flex-grow-1">
																	<h2 class="d-flex align-items-center fs-3 fw-bolder flex-wrap" th:text="${service.name}">
																	</h2>
																	<div class="fw-bold opacity-50" th:text="${service.description}">
																	</div>
																</div>
																<!--end::Info-->
															</div>
															<!--end::Description-->

															<!--begin::Price-->
															<div class="ms-5">
																<span class="fs-2x fw-bolder" th:text="${#numbers.formatCurrency(service.basePrice)}">
																</span>
															</div>
															<!--end::Price-->
														</label>
														<!--end::Radio button-->
													</div>
												</div>
											</div>
											<!--end::Input group-->
										</div>
									</div>
									<!--end::Step 2-->
									<!--begin::Step 3-->
									<div data-kt-stepper-element="content">
										<div class="w-100">
											<div class="row ">
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Customer Name</label>
													<div class="fs-3 fw-bold" id="customerNameSummary">John Doe</div>
												</div>
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Customer Phone</label>
													<div class="fs-3 fw-bold" id="customerPhoneSummary">0561654165</div>
												</div>
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Email</label>
													<div class="fs-3 fw-bold" id="customerEmailSummary">John Doe</div>
												</div>
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Address</label>
													<div class="fs-3 fw-bold" id="customerAddressSummary">0561654165</div>
												</div>
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="fv-row">
												<label class="d-flex align-items-center fs-5 fw-bold mb-4">
													<span class="">Services selected</span>
												</label>
												<div id="selectedServicesList">
													<div class="d-flex flex-stack py-5 border border-gray-300 border-dashed rounded mb-3">
														<div class="d-flex align-items-center">
															<div class="ms-6">
																<a href="#" class="d-flex align-items-center fs-5 fw-bolder text-dark text-hover-primary">Classic Haircut</a>
																<div class="fw-bold text-muted">Description</div>
															</div>
														</div>
														<div class="d-flex me-6">
															<div class="text-end">
																<div class="fs-5 fw-bolder text-dark">$23,000</div>
															</div>
														</div>
													</div>
													<div class="d-flex flex-stack py-5 border border-gray-300 border-dashed rounded mb-3">
														<div class="d-flex align-items-center">
															<div class="ms-6">
																<a href="#" class="d-flex align-items-center fs-5 fw-bolder text-dark text-hover-primary">Classic Haircut</a>
																<div class="fw-bold text-muted">Description</div>
															</div>
														</div>
														<div class="d-flex me-6">
															<div class="text-end">
																<div class="fs-5 fw-bolder text-dark">$23,000</div>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div class="d-flex justify-content-between align-items-center mt-7">
												<div class="fs-3 fw-bold">Total</div>
												<div class="fs-3 fw-bold text-success" id="totalPrice">2,500,000 vnd</div>
											</div>
											<!--end::Input group-->
										</div>
									</div>
									<!--end::Step 3-->
									<!--begin::Actions-->
									<div class="d-flex flex-stack pt-10">
										<!--begin::Wrapper-->
										<div class="me-2">
											<button type="button" class="btn btn-lg btn-light-primary me-3" data-kt-stepper-action="previous">
											<!--begin::Svg Icon | path: icons/duotune/arrows/arr063.svg-->
											<span class="svg-icon svg-icon-3 me-1">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
													<rect opacity="0.5" x="6" y="11" width="13" height="2" rx="1" fill="currentColor" />
													<path d="M8.56569 11.4343L12.75 7.25C13.1642 6.83579 13.1642 6.16421 12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75L5.70711 11.2929C5.31658 11.6834 5.31658 12.3166 5.70711 12.7071L11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25C13.1642 17.8358 13.1642 17.1642 12.75 16.75L8.56569 12.5657C8.25327 12.2533 8.25327 11.7467 8.56569 11.4343Z" fill="currentColor" />
												</svg>
											</span>
											<!--end::Svg Icon-->Back</button>
										</div>
										<!--end::Wrapper-->
										<!--begin::Wrapper-->
										<div>
											<button type="submit" class="btn btn-lg btn-primary" data-kt-stepper-action="submit">
												<span class="indicator-label">Submit
												<!--begin::Svg Icon | path: icons/duotune/arrows/arr064.svg-->
												<span class="svg-icon svg-icon-3 ms-2 me-0">
													<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
														<rect opacity="0.5" x="18" y="13" width="13" height="2" rx="1" transform="rotate(-180 18 13)" fill="currentColor" />
														<path d="M15.4343 12.5657L11.25 16.75C10.8358 17.1642 10.8358 17.8358 11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25L18.2929 12.7071C18.6834 12.3166 18.6834 11.6834 18.2929 11.2929L12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75C10.8358 6.16421 10.8358 6.83579 11.25 7.25L15.4343 11.4343C15.7467 11.7467 15.7467 12.2533 15.4343 12.5657Z" fill="currentColor" />
													</svg>
												</span>
												<!--end::Svg Icon--></span>
												<span class="indicator-progress">Please wait...
												<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
											</button>
											<button type="button" class="btn btn-lg btn-primary" data-kt-stepper-action="next">Continue
											<!--begin::Svg Icon | path: icons/duotune/arrows/arr064.svg-->
											<span class="svg-icon svg-icon-3 ms-1 me-0">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
													<rect opacity="0.5" x="18" y="13" width="13" height="2" rx="1" transform="rotate(-180 18 13)" fill="currentColor" />
													<path d="M15.4343 12.5657L11.25 16.75C10.8358 17.1642 10.8358 17.8358 11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25L18.2929 12.7071C18.6834 12.3166 18.6834 11.6834 18.2929 11.2929L12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75C10.8358 6.16421 10.8358 6.83579 11.25 7.25L15.4343 11.4343C15.7467 11.7467 15.7467 12.2533 15.4343 12.5657Z" fill="currentColor" />
												</svg>
											</span>
											<!--end::Svg Icon--></button>
										</div>
										<!--end::Wrapper-->
									</div>
									<!--end::Actions-->
								</form>
								<!--end::Form-->
							</div>
							<!--end::Content-->
						</div>
						<!--end::Stepper-->
					</div>
					<!--end::Modal body-->
				</div>
				<!--end::Modal content-->
			</div>
			<!--end::Modal dialog-->
		</div>
		<!--end::Modal - Create App-->

		<!--begin::Modal - Create App 2-->
		<div class="modal fade" id="kt_modal_create_app_2" tabindex="-1" aria-hidden="true">
			<!--begin::Modal dialog-->
			<div class="modal-dialog modal-dialog-centered modal-fullscreen px-9 py-20">
				<!--begin::Modal content-->
				<div class="modal-content modal-rounded">
					<!--begin::Modal header-->
					<div class="modal-header">
						<!--begin::Modal title-->
						<h2>Create Transaction</h2>
						<!--end::Modal title-->
						<!--begin::Close-->
						<div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
							<!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
							<span class="svg-icon svg-icon-1">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
									<rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
									<rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
								</svg>
							</span>
							<!--end::Svg Icon-->
						</div>
						<!--end::Close-->
					</div>
					<!--end::Modal header-->
					<!--begin::Modal body-->
					<div class="modal-body py-lg-10 px-lg-10">
						<!--begin::Stepper-->
						<div class="stepper stepper-pills stepper-column d-flex flex-column flex-xl-row flex-row-fluid" id="kt_modal_create_app_stepper_2">
							<!--begin::Aside-->
							<div class="d-flex justify-content-center justify-content-xl-start flex-row-auto w-100 w-xl-300px">
								<!--begin::Nav-->
								<div class="stepper-nav ps-lg-10">
									<!--begin::Step 1-->
									<div class="stepper-item current" data-kt-stepper-element="nav">
										<!--begin::Line-->
										<div class="stepper-line w-40px"></div>
										<!--end::Line-->
										<!--begin::Icon-->
										<div class="stepper-icon w-40px h-40px">
											<i class="stepper-check fas fa-check"></i>
											<span class="stepper-number">1</span>
										</div>
										<!--end::Icon-->
										<!--begin::Label-->
										<div class="stepper-label">
											<h3 class="stepper-title">Customer</h3>
											<div class="stepper-desc">Ask customer's info</div>
										</div>
										<!--end::Label-->
									</div>
									<!--end::Step 1-->
									<!--begin::Step 2-->
									<div class="stepper-item" data-kt-stepper-element="nav">
										<!--begin::Line-->
										<div class="stepper-line w-40px"></div>
										<!--end::Line-->
										<!--begin::Icon-->
										<div class="stepper-icon w-40px h-40px">
											<i class="stepper-check fas fa-check"></i>
											<span class="stepper-number">2</span>
										</div>
										<!--begin::Icon-->
										<!--begin::Label-->
										<div class="stepper-label">
											<h3 class="stepper-title">Service</h3>
											<div class="stepper-desc">Select services used</div>
										</div>
										<!--begin::Label-->
									</div>
									<!--end::Step 2-->
									<!--begin::Step 3-->
									<div class="stepper-item" data-kt-stepper-element="nav">
										<!--begin::Line-->
										<div class="stepper-line w-40px"></div>
										<!--end::Line-->
										<!--begin::Icon-->
										<div class="stepper-icon w-40px h-40px">
											<i class="stepper-check fas fa-check"></i>
											<span class="stepper-number">3</span>
										</div>
										<!--end::Icon-->
										<!--begin::Label-->
										<div class="stepper-label">
											<h3 class="stepper-title">Summary</h3>
											<div class="stepper-desc">Billing summary</div>
										</div>
										<!--end::Label-->
									</div>
									<!--end::Step 3-->
								</div>
								<!--end::Nav-->
							</div>
							<!--begin::Aside-->
							<!--begin::Content-->
							<div class="flex-row-fluid py-lg-5 px-lg-15">
								<!--begin::Form-->
								<form class="form" novalidate="novalidate" id="kt_modal_create_app_form_2" action="/transaction/old-customer" th:object="${transactionForOldCustomer}" method="post">
									<!--begin::Step 1-->
									<div class="current" data-kt-stepper-element="content">
										<div class="w-100">
											<input type="hidden" name="_csrf" th:value="${#ctx._csrf.token}" />
											<!--begin::Input group-->
											<div class="fv-row mb-10">
												<!--begin::Label-->
												<label class="d-flex align-items-center fs-5 fw-bold mb-2">
													<span class="">Existing Customer Phone Number</span>
												</label>
												<!--end::Label-->
												<!--begin::Input-->

												<div class="input-group">
													<input type="text" class="form-control form-control-lg form-control-solid" aria-describedby="basic-addon2" id="old-user-phone" name="codeOrPhone" th:field="*{phone}"/>
													<button type="button" class="input-group-text btn-primary text-white" id="basic-addon2_2" onclick="searchUser_2()">Search</button>
												</div>
												<!--end::Input-->
												<div id="search-result_2"></div>
											</div>
										</div>
									</div>
									<!--end::Step 1-->
									<!--begin::Step 2-->
									<div data-kt-stepper-element="content">
										<div class="w-100 fv-row" >
											<!--begin::Input group-->
											<div th:each="category : ${categories}">
												<label class="d-flex align-items-center fs-5 fw-bold mb-4">
													<span th:text="${category.name}"></span>
												</label>
												<div class="row">
													<div class="w-lg-50" th:each="service : ${category.services}">
														<!--begin::Radio button-->
														<label class="btn btn-outline btn-outline-dashed d-flex flex-stack text-start p-6 mb-5">
															<!--end::Description-->
															<div class="d-flex align-items-center me-2">
																<!--begin::Radio-->
																<div class="form-check form-check-custom form-check-solid form-check-primary me-6">
																	<input class="form-check-input" type="checkbox" name="services" th:value="${service.id}" th:attr="data-name=${service.name},data-desc=${service.description}, data-price=${service.basePrice}" onchange="updateSummary()" th:field="*{services}"/>
																</div>
																<!--end::Radio-->

																<!--begin::Info-->
																<div class="flex-grow-1">
																	<h2 class="d-flex align-items-center fs-3 fw-bolder flex-wrap" th:text="${service.name}">
																	</h2>
																	<div class="fw-bold opacity-50" th:text="${service.description}">
																	</div>
																</div>
																<!--end::Info-->
															</div>
															<!--end::Description-->

															<!--begin::Price-->
															<div class="ms-5">
																<span class="fs-2x fw-bolder" th:text="${#numbers.formatCurrency(service.basePrice)}">
																</span>
															</div>
															<!--end::Price-->
														</label>
														<!--end::Radio button-->
													</div>
												</div>
											</div>
											<!--end::Input group-->
										</div>
									</div>
									<!--end::Step 2-->
									<!--begin::Step 3-->
									<div data-kt-stepper-element="content">
										<div class="w-100">
											<div class="row ">
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Customer Name</label>
													<div class="fs-3 fw-bold" id="customerNameSummary_2">John Doe</div>
												</div>
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Customer Phone</label>
													<div class="fs-3 fw-bold" id="customerPhoneSummary_2">0561654165</div>
												</div>
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Email</label>
													<div class="fs-3 fw-bold" id="customerEmailSummary_2">John Doe</div>
												</div>
												<div class="col-md-6 mb-10">
													<label class="fs-5 fw-bold mb-2">Address</label>
													<div class="fs-3 fw-bold" id="customerAddressSummary_2">0561654165</div>
												</div>
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="fv-row">
												<label class="d-flex align-items-center fs-5 fw-bold mb-4">
													<span class="">Services selected</span>
												</label>
												<div id="selectedServicesList_2">
													<div class="d-flex flex-stack py-5 border border-gray-300 border-dashed rounded mb-3">
														<div class="d-flex align-items-center">
															<div class="ms-6">
																<a href="#" class="d-flex align-items-center fs-5 fw-bolder text-dark text-hover-primary">Classic Haircut</a>
																<div class="fw-bold text-muted">Description</div>
															</div>
														</div>
														<div class="d-flex me-6">
															<div class="text-end">
																<div class="fs-5 fw-bolder text-dark">$23,000</div>
															</div>
														</div>
													</div>
													<div class="d-flex flex-stack py-5 border border-gray-300 border-dashed rounded mb-3">
														<div class="d-flex align-items-center">
															<div class="ms-6">
																<a href="#" class="d-flex align-items-center fs-5 fw-bolder text-dark text-hover-primary">Classic Haircut</a>
																<div class="fw-bold text-muted">Description</div>
															</div>
														</div>
														<div class="d-flex me-6">
															<div class="text-end">
																<div class="fs-5 fw-bolder text-dark">$23,000</div>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div class="d-flex justify-content-between align-items-center mt-7">
												<div class="fs-3 fw-bold">Total</div>
												<div class="fs-3 fw-bold text-success" id="totalPrice_2">2,500,000 vnd</div>
											</div>
											<!--end::Input group-->
										</div>
									</div>
									<!--end::Step 3-->
									<!--begin::Actions-->
									<div class="d-flex flex-stack pt-10">
										<!--begin::Wrapper-->
										<div class="me-2">
											<button type="button" class="btn btn-lg btn-light-primary me-3" data-kt-stepper-action="previous">
												<!--begin::Svg Icon | path: icons/duotune/arrows/arr063.svg-->
												<span class="svg-icon svg-icon-3 me-1">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
													<rect opacity="0.5" x="6" y="11" width="13" height="2" rx="1" fill="currentColor" />
													<path d="M8.56569 11.4343L12.75 7.25C13.1642 6.83579 13.1642 6.16421 12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75L5.70711 11.2929C5.31658 11.6834 5.31658 12.3166 5.70711 12.7071L11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25C13.1642 17.8358 13.1642 17.1642 12.75 16.75L8.56569 12.5657C8.25327 12.2533 8.25327 11.7467 8.56569 11.4343Z" fill="currentColor" />
												</svg>
											</span>
												<!--end::Svg Icon-->Back</button>
										</div>
										<!--end::Wrapper-->
										<!--begin::Wrapper-->
										<div>
											<button type="submit" class="btn btn-lg btn-primary" data-kt-stepper-action="submit">
												<span class="indicator-label">Submit
													<!--begin::Svg Icon | path: icons/duotune/arrows/arr064.svg-->
												<span class="svg-icon svg-icon-3 ms-2 me-0">
													<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
														<rect opacity="0.5" x="18" y="13" width="13" height="2" rx="1" transform="rotate(-180 18 13)" fill="currentColor" />
														<path d="M15.4343 12.5657L11.25 16.75C10.8358 17.1642 10.8358 17.8358 11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25L18.2929 12.7071C18.6834 12.3166 18.6834 11.6834 18.2929 11.2929L12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75C10.8358 6.16421 10.8358 6.83579 11.25 7.25L15.4343 11.4343C15.7467 11.7467 15.7467 12.2533 15.4343 12.5657Z" fill="currentColor" />
													</svg>
												</span>
													<!--end::Svg Icon--></span>
												<span class="indicator-progress">Please wait...
												<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
											</button>
											<button type="button" class="btn btn-lg btn-primary" data-kt-stepper-action="next">Continue
												<!--begin::Svg Icon | path: icons/duotune/arrows/arr064.svg-->
												<span class="svg-icon svg-icon-3 ms-1 me-0">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
													<rect opacity="0.5" x="18" y="13" width="13" height="2" rx="1" transform="rotate(-180 18 13)" fill="currentColor" />
													<path d="M15.4343 12.5657L11.25 16.75C10.8358 17.1642 10.8358 17.8358 11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25L18.2929 12.7071C18.6834 12.3166 18.6834 11.6834 18.2929 11.2929L12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75C10.8358 6.16421 10.8358 6.83579 11.25 7.25L15.4343 11.4343C15.7467 11.7467 15.7467 12.2533 15.4343 12.5657Z" fill="currentColor" />
												</svg>
											</span>
												<!--end::Svg Icon--></button>
										</div>
										<!--end::Wrapper-->
									</div>
									<!--end::Actions-->
								</form>
								<!--end::Form-->
							</div>
							<!--end::Content-->
						</div>
						<!--end::Stepper-->
					</div>
					<!--end::Modal body-->
				</div>
				<!--end::Modal content-->
			</div>
			<!--end::Modal dialog-->
		</div>
		<!--end::Modal - Create App-->

		<!--end::Modals-->
		<!--begin::Javascript-->
		<script>var hostUrl = "/";</script>
		<!--begin::Global Javascript Bundle(used by all pages)-->
		<script th:src="@{/plugins/global/plugins.bundle.js}"></script>
		<script th:src="@{/js/scripts.bundle.js}"></script>
		<!--end::Global Javascript Bundle-->
		<!--begin::Page Vendors Javascript(used by this page)-->
		<script th:src="@{/plugins/custom/fullcalendar/fullcalendar.bundle.js}"></script>
		<script th:src="@{/plugins/custom/datatables/datatables.bundle.js}"></script>
		<!--end::Page Vendors Javascript-->
		<!--begin::Page Custom Javascript(used by this page)-->
		<script th:src="@{/js/widgets.bundle.js}"></script>
		<script th:src="@{/js/custom/widgets.js}"></script>
		<script th:src="@{/js/custom/apps/chat/chat.js}"></script>
		<script th:src="@{/js/custom/utilities/modals/upgrade-plan.js}"></script>
		<script th:src="@{/js/custom/utilities/modals/create-app.js}"></script>
		<script th:src="@{/js/custom/utilities/modals/users-search.js}"></script>

		<script th:inline="javascript">
			/*<![CDATA[*/

			function searchUser() {
				const csrfToken = $("meta[name='_csrf']").attr("content");
				const csrfHeader = $("meta[name='_csrf_header']").attr("content") || "X-CSRF-TOKEN";
				const codeOrPhone = $("#user-code-or-phone").val();

				$.ajax({
					url: /*[[@{/user_h/search}]]*/, // Use Thymeleaf to generate the URL
					type: "POST",
					data: {
						codeOrPhone: codeOrPhone
					},
					beforeSend: function(xhr) {
						xhr.setRequestHeader(csrfHeader, csrfToken);
					},
					success: function(response) {
						console.log(response);
						if (response) {
							const user = response;
							const name = user.name;
							const phone = user.phone;
							const roles = user.roles;

							let rolesHtml = ""; // Initialize empty string for roles

							// Loop through roles and build HTML string
							for (const role of roles) {
								rolesHtml += `<span class="border border-2 rounded ms-3 p-1 px-2">${role.name}</span>`;
							}
							const userHtml = `
								<div class="border border-hover-primary p-4 rounded mt-7">
								   <div class="d-flex flex-stack">
									  <div class="d-flex">
										 <div class="symbol symbol-circle symbol-45px">
											<img src="/media/avatars/300-20.jpg" alt="">
										 </div>
										 <div class="ms-5">
											<div class="d-flex align-items-center">
											   <a href="/" class="text-dark fw-bolder text-hover-primary fs-5 me-4">${name}</a>
											</div>
											<span class="text-muted fw-bold mb-3">${phone}</span>
											</div>
										 </div>
									  <div class="d-flex">
										 <div class="d-flex text-gray-700 fw-bold fs-7">
											${rolesHtml}  </div>
										 </div>
									  </div>
								   </div>
							`;

							$("#search-result").html(userHtml);
						} else {
							$("#search-result").html(`<div class="text-danger">No user found</div>`);
						}
					},
					error: function(jqXHR, textStatus, errorThrown) {
						if(jqXHR.status == 404) {
							$("#search-result").html(`<div class="text-danger">No user found</div>`);
						} else {
							console.error("AJAX error:", textStatus, errorThrown);
							$("#search-result").html("An error occurred while searching.");
						}
					}
				});
			}

			function searchUser_2() {
				const csrfToken = $("meta[name='_csrf']").attr("content");
				const csrfHeader = $("meta[name='_csrf_header']").attr("content") || "X-CSRF-TOKEN";
				const codeOrPhone = $("#old-user-phone").val();

				$.ajax({
					url: /*[[@{/user_h/search}]]*/, // Use Thymeleaf to generate the URL
					type: "POST",
					data: {
						codeOrPhone: codeOrPhone
					},
					beforeSend: function(xhr) {
						xhr.setRequestHeader(csrfHeader, csrfToken);
					},
					success: function(response) {
						console.log(response);
						if (response) {
							const user = response;
							const name = user.name;
							const phone = user.phone;
							const email = user.email;
							const address = user.address;
							const roles = user.roles;

							let rolesHtml = ""; // Initialize empty string for roles

							// Loop through roles and build HTML string
							for (const role of roles) {
								rolesHtml += `<span class="border border-2 rounded ms-3 p-1 px-2">${role.name}</span>`;
							}
							const userHtml = `
								<div class="border border-hover-primary p-4 rounded mt-7">
								   <div class="d-flex flex-stack">
									  <div class="d-flex">
										 <div class="symbol symbol-circle symbol-45px">
											<img src="/media/avatars/300-20.jpg" alt="">
										 </div>
										 <div class="ms-5">
											<div class="d-flex align-items-center">
											   <a href="/" class="text-dark fw-bolder text-hover-primary fs-5 me-4">${name}</a>
											</div>
											<span class="text-muted fw-bold mb-3">${phone}</span>
											</div>
										 </div>
									  <div class="d-flex">
										 <div class="d-flex text-gray-700 fw-bold fs-7">
											${rolesHtml}  </div>
										 </div>
									  </div>
								   </div>
							`;

							$("#search-result_2").html(userHtml);

							// Update summary elements
							$("#customerNameSummary_2").text(name);
							$("#customerPhoneSummary_2").text(phone);
							$("#customerEmailSummary_2").text(email ? email : "(Empty)");
							$("#customerAddressSummary_2").text(address ? address : "(Empty)");
						} else {
							$("#search-result_2").html(`<div class="text-danger">No user found</div>`);
						}
					},
					error: function(jqXHR, textStatus, errorThrown) {
						if(jqXHR.status == 404) {
							$("#search-result_2").html(`<div class="text-danger">No user found</div>`);
						} else {
							console.error("AJAX error:", textStatus, errorThrown);
							$("#search-result_2").html("An error occurred while searching.");
						}
					}
				});
			}
			/*]]>*/
		</script>

		<script>
			function updateSummary() {
				const selectedServices = $("input[type='checkbox'][name='services']:checked");
				const customerName = $("input[type='text'][name='name']").val(); // Assuming you have an input with id="customerName"
				const customerPhone = $("input[type='text'][name='phone']").val(); // Assuming you have an input with id="customerPhone"
				const customerEmail = $("input[type='text'][name='email']").val(); // Assuming you have an input with id="customerEmail"
				const customerAddress = $("input[type='text'][name='address']").val(); // Assuming you have an input with id="customerEmail"

				let total = 0;
				let selectedServicesList = "";

				const locale = 'vi-VN'; // Change to your desired locale (e.g., 'en-US' for US Dollars)
				const formatter = new Intl.NumberFormat(locale, {
					style: 'currency',
					currency: 'VND' // Change to your desired currency code (e.g., 'USD')
				});

				// Loop through selected services
				selectedServices.each(function() {
					const serviceId = $(this).val();
					const serviceName = $(this).data("name");
					const serviceDesc = $(this).data("desc");
					const servicePrice = parseFloat($(this).data("price"));

					total += servicePrice;
					selectedServicesList += `<div class="d-flex flex-stack py-5 border border-gray-300 border-dashed rounded mb-3">
						<div class="d-flex align-items-center">
							<div class="ms-6">
								<a href="#" class="d-flex align-items-center fs-5 fw-bolder text-dark text-hover-primary">${serviceName}</a>
								<div class="fw-bold text-muted">${serviceDesc}</div>
								</div>
								</div>
								<div class="d-flex me-6">
								<div class="text-end">
								<div class="fs-5 fw-bolder text-dark">${formatter.format(servicePrice)}</div>
							</div>
						</div>
					</div>`;
				});

				// Update summary elements
				$("#customerNameSummary").text(customerName);
				$("#customerPhoneSummary").text(customerPhone);
				$("#customerEmailSummary").text(customerEmail ? customerEmail : "(Empty)");
				$("#customerAddressSummary").text(customerAddress ? customerAddress : "(Empty)");
				$("#selectedServicesList").html(selectedServicesList);
				$("#totalPrice").text(formatter.format(total));
			}
		</script>

		<!--end::Page Custom Javascript-->
		<!--end::Javascript-->
	</body>
	<!--end::Body-->
</html>